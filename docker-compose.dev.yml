version: "3.8"

services:
  web:
    volumes:
      - "./:/usr/src/app/"
    entrypoint: pipenv run gunicorn -w=${NUM_OF_WORKERS:-2} -t=${WORKER_TIMEOUT:-600} playground.wsgi --bind 0.0.0.0:${PORT:-8000} --reload
    environment:
      DEBUG: 1
  
  nginx:
    volumes:
     - ./playground/static:/app/static

  migration:
    volumes:
      - "./:/usr/src/app/"